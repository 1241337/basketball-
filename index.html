<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basketball Game Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .game-container {
            text-align: center;
            width: 80%;
            max-width: 600px;
            background-color: white;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        h1 {
            color: #333;
        }

        .button-container {
            margin-top: 20px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            border-radius: 5px;
        }

        button:disabled {
            background-color: #ccc;
        }

        #game-status {
            font-size: 20px;
            margin: 20px 0;
            color: #333;
        }

        #game-log {
            font-size: 14px;
            color: #555;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            width: 100%;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>Basketball Game Simulator</h1>

        <div class="button-container">
            <button id="start-button">Start Game</button>
            <button id="advance-button" disabled>Advance Game</button>
            <button id="reset-button">Reset Game</button>
        </div>

        <div id="game-status">Game not started</div>

        <div id="game-log"></div>
    </div>

    <script>
        let scorePlayer = 0;
        let scoreOpponent = 0;
        let currentQuarter = 1;
        let gameOver = false;
        let gameLog = [];

        // Player and opponent stats
        const playerTeam = {
            "Player 1": { shooting: 7, passing: 6, defense: 5, energy: 100 },
            "Player 2": { shooting: 6, passing: 7, defense: 6, energy: 100 },
            "Player 3": { shooting: 8, passing: 5, defense: 6, energy: 100 }
        };

        const opponentTeam = {
            "Opponent 1": { shooting: 6, passing: 6, defense: 7, energy: 100 },
            "Opponent 2": { shooting: 7, passing: 6, defense: 6, energy: 100 },
            "Opponent 3": { shooting: 6, passing: 7, defense: 5, energy: 100 }
        };

        let gameLogElement = document.getElementById('game-log');
        let statusElement = document.getElementById('game-status');

        function updateGameStatus(message) {
            statusElement.innerHTML = message;
            gameLog.push(message);
            renderGameLog();
        }

        function renderGameLog() {
            gameLogElement.innerHTML = '';
            gameLog.forEach((log, index) => {
                gameLogElement.innerHTML += `<p>${log}</p>`;
            });
        }

        // Function to simulate shooting
        function shoot(player) {
            let chance = Math.random();
            let shootingAccuracy = playerTeam[player] ? playerTeam[player].shooting : opponentTeam[player].shooting;
            return chance < shootingAccuracy / 10;
        }

        // Function to simulate a pass
        function passBall(team) {
            let players = team === 'player' ? Object.keys(playerTeam) : Object.keys(opponentTeam);
            let newHandler = players[Math.floor(Math.random() * players.length)];
            return newHandler;
        }

        // Function to simulate a quarter
        function simulateQuarter() {
            if (gameOver) return;

            // Player's turn
            let playerAction = Math.floor(Math.random() * 4) + 1;
            let player = passBall('player');
            if (playerAction === 1) {
                // Simulate shooting
                if (shoot(player)) {
                    scorePlayer += 2;
                    updateGameStatus(`${player} scores a 2-point shot!`);
                } else {
                    updateGameStatus(`${player} misses a 2-point shot.`);
                }
            } else if (playerAction === 2) {
                // Simulate shooting a 3-point shot
                if (shoot(player)) {
                    scorePlayer += 3;
                    updateGameStatus(`${player} scores a 3-point shot!`);
                } else {
                    updateGameStatus(`${player} misses a 3-point shot.`);
                }
            } else if (playerAction === 3) {
                // Simulate a pass
                let newHandler = passBall('player');
                updateGameStatus(`${player} passes the ball to ${newHandler}.`);
            }

            // Opponent's turn
            let opponentAction = Math.floor(Math.random() * 4) + 1;
            let opponent = passBall('opponent');
            if (opponentAction === 1) {
                // Simulate shooting
                if (shoot(opponent)) {
                    scoreOpponent += 2;
                    updateGameStatus(`${opponent} scores a 2-point shot!`);
                } else {
                    updateGameStatus(`${opponent} misses a 2-point shot.`);
                }
            } else if (opponentAction === 2) {
                // Simulate shooting a 3-point shot
                if (shoot(opponent)) {
                    scoreOpponent += 3;
                    updateGameStatus(`${opponent} scores a 3-point shot!`);
                } else {
                    updateGameStatus(`${opponent} misses a 3-point shot.`);
                }
            } else if (opponentAction === 3) {
                // Simulate a pass
                let newHandler = passBall('opponent');
                updateGameStatus(`${opponent} passes the ball to ${newHandler}.`);
            }

            // Check if the game is over
            if (currentQuarter > 4) {
                gameOver = true;
                if (scorePlayer > scoreOpponent) {
                    updateGameStatus("Game over! Player wins!");
                } else if (scoreOpponent > scorePlayer) {
                    updateGameStatus("Game over! Opponent wins!");
                } else {
                    updateGameStatus("Game over! It's a tie!");
                }
            }
        }

        // Function to start the game
        function startGame() {
            if (!gameOver) {
                if (currentQuarter <= 4) {
                    updateGameStatus(`Quarter ${currentQuarter} in progress...`);
                    simulateQuarter(); // Simulate the current quarter
                    currentQuarter++;

                    // Check if we have completed all 4 quarters
                    if (currentQuarter > 4) {
                        gameOver = true;
                        if (scorePlayer > scoreOpponent) {
                            updateGameStatus("Player wins!");
                        } else if (scoreOpponent > scorePlayer) {
                            updateGameStatus("Opponent wins!");
                        } else {
                            updateGameStatus("It's a tie!");
                        }
                    } else {
                        updateGameStatus(`Starting Quarter ${currentQuarter}`);
                    }
                }
            } else {
                updateGameStatus("Game already over. Click reset to play again.");
            }
        }

        // Function to advance to the next quarter manually
        function advanceQuarter() {
            if (gameOver) {
                updateGameStatus("Game already over. Click reset to play again.");
                return;
            }

            if (currentQuarter <= 4) {
                updateGameStatus(`Advancing to Quarter ${currentQuarter}...`);
                simulateQuarter();
                currentQuarter++;

                if (currentQuarter > 4) {
                    gameOver = true;
                    if (scorePlayer > scoreOpponent) {
                        updateGameStatus("Game over! Player wins!");
                    } else if (scoreOpponent > scorePlayer) {
                        updateGameStatus("Game over! Opponent wins!");
                    } else {
                        updateGameStatus("Game over! It's a tie!");
                    }
                } else {
                    updateGameStatus(`Starting Quarter ${currentQuarter}`);
                }
            }
        }

        // Function to reset the game
        function resetGame() {
            scorePlayer = 0;
            scoreOpponent = 0;
            currentQuarter = 1;
            gameOver = false;
            gameLog = [];
            updateGameStatus("Game reset. Click Start Game to begin!");
            renderGameLog();
        }

        // Add event listeners to the buttons
        document.getElementById('start-button').addEventListener('click', startGame);
        document.getElementById('advance-button').addEventListener('click', advanceQuarter); // New event listener for advancing game
        document.getElementById('reset-button').addEventListener('click', resetGame);
    </script>

</body>
</html>
