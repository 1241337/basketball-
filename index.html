<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basketball Simulation Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
        }
        .container {
            text-align: center;
        }
        .game-board {
            margin-top: 20px;
        }
        .button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        .button:hover {
            background-color: #45a049;
        }
        .status {
            margin-top: 20px;
            font-size: 18px;
        }
        .stats {
            margin-top: 20px;
            font-size: 16px;
        }
        .stats div {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Basketball Simulation Game</h1>
        <button id="startButton" class="button">Start Game</button>
        <button id="resetButton" class="button">Reset Game</button>
        
        <div class="status" id="status"></div>
        
        <div class="stats" id="playerStats">
            <h3>Player Stats:</h3>
            <p id="player1Stats">Player 1: 0 points, 100% energy, 0 fouls</p>
            <p id="player2Stats">Player 2: 0 points, 100% energy, 0 fouls</p>
            <p id="player3Stats">Player 3: 0 points, 100% energy, 0 fouls</p>
        </div>
        
        <div class="stats" id="opponentStats">
            <h3>Opponent Stats:</h3>
            <p id="opponent1Stats">Opponent 1: 0 points, 100% energy, 0 fouls</p>
            <p id="opponent2Stats">Opponent 2: 0 points, 100% energy, 0 fouls</p>
            <p id="opponent3Stats">Opponent 3: 0 points, 100% energy, 0 fouls</p>
        </div>
    </div>

    <script>
        // Game variables
        let scorePlayer = 0;
        let scoreOpponent = 0;
        let playerFouls = { player1: 0, player2: 0, player3: 0 };
        let opponentFouls = { opponent1: 0, opponent2: 0, opponent3: 0 };
        let playerEnergy = { player1: 100, player2: 100, player3: 100 };
        let opponentEnergy = { opponent1: 100, opponent2: 100, opponent3: 100 };
        let currentQuarter = 1;
        let gameOver = false;
        let playerStats = {
            player1: { shooting: 8, passing: 7, defense: 6, points: 0 },
            player2: { shooting: 7, passing: 6, defense: 7, points: 0 },
            player3: { shooting: 9, passing: 8, defense: 5, points: 0 }
        };
        let opponentStats = {
            opponent1: { shooting: 7, passing: 6, defense: 8, points: 0 },
            opponent2: { shooting: 6, passing: 7, defense: 7, points: 0 },
            opponent3: { shooting: 8, passing: 5, defense: 6, points: 0 }
        };

        // Function to simulate shooting with fatigue
        function shoot(player) {
            let energyFactor = playerEnergy[player] / 100; // Energy between 0 and 1
            let shootingAccuracy = playerStats[player].shooting * energyFactor; // Apply fatigue
            let chance = Math.random() * 10;
            return chance <= shootingAccuracy;
        }

        // Function to simulate free throw with fatigue
        function freeThrow(player) {
            let energyFactor = playerEnergy[player] / 100;
            let shootingAccuracy = (playerStats[player].shooting - 2) * energyFactor;
            let chance = Math.random() * 10;
            return chance <= shootingAccuracy;
        }

        // Function to handle fouls and substitutions
        function checkFoul(player) {
            if (player in playerFouls) {
                playerFouls[player]++;
                updateGameStatus(`${player} now has ${playerFouls[player]} fouls.`);
                if (playerFouls[player] >= 5) {
                    updateGameStatus(`${player} has fouled out!`);
                }
            }
        }

        // Function to decrease player energy after an action
        function decreaseEnergy(player) {
            playerEnergy[player] -= 10;
            if (playerEnergy[player] < 0) playerEnergy[player] = 0;
            updateGameStatus(`${player}'s energy is now ${playerEnergy[player]}%.`);
        }

        // Function to simulate a shot (2-point or 3-point)
        function takeShot(player) {
            let action = Math.random() > 0.5 ? "2-point" : "3-point";
            if (action === "2-point") {
                if (shoot(player)) {
                    scorePlayer += 2;
                    playerStats[player].points += 2;
                    updateGameStatus(`${player} makes a 2-point shot!`);
                } else {
                    updateGameStatus(`${player} misses the 2-point shot.`);
                }
            } else {
                if (shoot(player)) {
                    scorePlayer += 3;
                    playerStats[player].points += 3;
                    updateGameStatus(`${player} makes a 3-point shot!`);
                } else {
                    updateGameStatus(`${player} misses the 3-point shot.`);
                }
            }
        }

        // Function to simulate the whole quarter
        function simulateQuarter() {
            for (let i = 0; i < 5; i++) {
                // Simulate Player's Turn
                let player = `player${Math.floor(Math.random() * 3) + 1}`;
                updateGameStatus(`Player's action: ${player} takes a shot.`);
                takeShot(player);
                decreaseEnergy(player);

                // Check if player fouled
                if (Math.random() < 0.2) {
                    checkFoul(player); // Random chance of a foul
                }

                // Simulate Opponent's Turn
                let opponent = `opponent${Math.floor(Math.random() * 3) + 1}`;
                updateGameStatus(`Opponent's action: ${opponent} takes a shot.`);
                if (shoot(opponent)) {
                    scoreOpponent += 2;
                    opponentStats[opponent].points += 2;
                    updateGameStatus(`${opponent} makes a 2-point shot!`);
                } else {
                    updateGameStatus(`${opponent} misses the 2-point shot.`);
                }

                // Decrease opponent energy
                decreaseEnergy(opponent);

                // Check if opponent fouled
                if (Math.random() < 0.2) {
                    checkFoul(opponent); // Random chance of a foul
                }
            }
            updateGameStatus(`Quarter ${currentQuarter} complete!`);
            updateGameStatus(`Score - Player: ${scorePlayer}, Opponent: ${scoreOpponent}`);
            updatePlayerStatsDisplay();
        }

        // Function to start the game
        function startGame() {
            if (!gameOver) {
                updateGameStatus(`Game started! Quarter ${currentQuarter}`);
                simulateQuarter();
                currentQuarter++;

                // Check for game over condition
                if (currentQuarter > 4) {
                    gameOver = true;
                    if (scorePlayer > scoreOpponent) {
                        updateGameStatus("Player wins!");
                    } else if (scoreOpponent > scorePlayer) {
                        updateGameStatus("Opponent wins!");
                    } else {
                        updateGameStatus("It's a tie!");
                    }
                }
            }
        }

        // Function to reset the game
        function resetGame() {
            scorePlayer = 0;
            scoreOpponent = 0;
            currentQuarter = 1;
            playerFouls = { player1: 0, player2: 0, player3: 0 };
            opponentFouls = { opponent1: 0, opponent2: 0, opponent3: 0 };
            playerEnergy = { player1: 100, player2: 100, player3: 100 };
            opponentEnergy = { opponent1: 100, opponent2: 100, opponent3: 100 };
            updateGameStatus("Game has been reset.");
            updatePlayerStatsDisplay();
            gameOver = false;
        }

        // Function to update game status in the HTML
        function updateGameStatus(message) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML += message + "<br>";
        }

        // Function to update player stats in the HTML
        function updatePlayerStatsDisplay() {
            // Update Player stats
            document.getElementById('player1Stats').innerText = `Player 1: ${playerStats.player1.points} points, ${playerEnergy.player1}% energy, ${playerFouls.player1} fouls`;
            document.getElementById('player2Stats').innerText = `Player 2: ${playerStats.player2.points} points, ${playerEnergy.player2}% energy, ${playerFouls.player2} fouls`;
            document.getElementById('player3Stats').innerText = `Player 3: ${playerStats.player3.points} points, ${playerEnergy.player3}% energy, ${playerFouls.player3} fouls`;

            // Update Opponent stats
            document.getElementById('opponent1Stats').innerText = `Opponent 1: ${opponentStats.opponent1.points} points, ${opponentEnergy.opponent1}% energy, ${opponentFouls.opponent1} fouls`;
            document.getElementById('opponent2Stats').innerText = `Opponent 2: ${opponentStats.opponent2.points} points, ${opponentEnergy.opponent2}% energy, ${opponentFouls.opponent2} fouls`;
            document.getElementById('opponent3Stats').innerText = `Opponent 3: ${opponentStats.opponent3.points} points, ${opponentEnergy.opponent3}% energy, ${opponentFouls.opponent3} fouls`;
        }

        // Start game button
        document.getElementById('startButton').addEventListener('click', startGame);

        // Reset game button
        document.getElementById('resetButton').addEventListener('click', resetGame);
    </script>
</body>
</html>
